<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>
<HEAD>
<TITLE>Enscript Output</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#1F00FF" ALINK="#FF0000" VLINK="#9900DD">
<A NAME="top">
<H1>Contents</H1>
<OL>
  <LI><A HREF="#file1">animate.py</A>
</OL>
<HR>
<A NAME="file1">
<H1>animate.py</H1>

<PRE>
<B><FONT COLOR="#A020F0">import</FONT></B> time
<B><FONT COLOR="#A020F0">import</FONT></B> matplotlib.pyplot as plt
<B><FONT COLOR="#A020F0">import</FONT></B> matplotlib.animation as animation
<B><FONT COLOR="#A020F0">from</FONT></B> matplotlib.collections <B><FONT COLOR="#A020F0">import</FONT></B> EllipseCollection, LineCollection

<B><FONT COLOR="#A020F0">from</FONT></B> simul <B><FONT COLOR="#A020F0">import</FONT></B> Simul


<B><FONT COLOR="#A020F0">class</FONT></B> Animate:
    <B><FONT COLOR="#A020F0">def</FONT></B> <B><FONT COLOR="#0000FF">__init__</FONT></B>(self, simul):
        self.simul = simul
        self.fig, self.ax = plt.subplots(figsize=(5, 5))  <I><FONT COLOR="#B22222"># initialise  graphics
</FONT></I>        self.circles = EllipseCollection(widths=2*simul.sigma, heights=2*simul.sigma, angles=0, units=<B><FONT COLOR="#BC8F8F">'x'</FONT></B>,
                                         offsets=simul.position, transOffset=self.ax.transData)  <I><FONT COLOR="#B22222"># circles at position
</FONT></I>        self.ax.add_collection(self.circles)

        self.segment = [[[0, 0], [0, simul.L], [simul.L, simul.L], [simul.L, 0], [0, 0]]]  <I><FONT COLOR="#B22222"># simulation cell
</FONT></I>        self.line = LineCollection(self.segment, colors=<B><FONT COLOR="#BC8F8F">'#000000'</FONT></B>)  <I><FONT COLOR="#B22222"># draw square
</FONT></I>        self.ax.add_collection(self.line)

        self.ax.set_xlim(left=-0.5, right=self.simul.L+0.5)  <I><FONT COLOR="#B22222"># plotting limits on screen
</FONT></I>        self.ax.set_ylim(bottom=-0.5, top=self.simul.L+0.5)
        self._ani = 0

    <B><FONT COLOR="#A020F0">def</FONT></B> <B><FONT COLOR="#0000FF">init</FONT></B>(self):  <I><FONT COLOR="#B22222"># this is the first thing drawn to the screen
</FONT></I>        self.circles.set_offsets(self.simul.position)

    <B><FONT COLOR="#A020F0">def</FONT></B> <B><FONT COLOR="#0000FF">anim_step</FONT></B>(self, m):  <I><FONT COLOR="#B22222"># m is the number of calls that have occurred to this function
</FONT></I>        <B><FONT COLOR="#A020F0">print</FONT></B>(<B><FONT COLOR="#BC8F8F">'anim_step m = '</FONT></B>, m)
        <B><FONT COLOR="#A020F0">if</FONT></B> m == 0:
            time.sleep(0.5)

        self.simul.md_step()  <I><FONT COLOR="#B22222"># perform simulation step
</FONT></I>        self.circles.set_offsets(self.simul.position)  <I><FONT COLOR="#B22222"># update positions on screen
</FONT></I>
    <B><FONT COLOR="#A020F0">def</FONT></B> <B><FONT COLOR="#0000FF">go</FONT></B>(self, nframes):
        self._ani = animation.FuncAnimation(self.fig, func=self.anim_step, frames=nframes,
                                            repeat=False, interval=10, init_func=self.init)  <I><FONT COLOR="#B22222"># run animation
</FONT></I>        plt.show()
</PRE>
<HR>
<ADDRESS>Generated by <A HREF="http://www.iki.fi/~mtr/genscript/">GNU Enscript 1.6.6</A>.</ADDRESS>
</BODY>
</HTML>
